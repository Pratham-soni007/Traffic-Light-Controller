module traffic_light_controller(
  input wire reset,
  input wire clk,
  output reg red,
  output reg yellow,
  output reg green);
  
  parameter GREEN=2'b00;
  parameter YELLOW=2'b01;
  parameter RED=2'b10;
  
  parameter GREEN_TIME=30;
  parameter YELLOW_TIME=10;
  parameter RED_TIME=40;
  
  reg[1:0] current_state,next_state;
  reg[6:0] count;
  
  always @(posedge clk or posedge reset) begin
    if(reset)begin
      current_state<=GREEN;
      count<=0;
    end else begin
      current_state<=next_state;
    if(next_state!=current_state)
      count=0;
    else
      count<=count+1;
  end
  end
  always @(*) begin
    case (current_state)
      GREEN:begin
        if(count>=GREEN_TIME -1)
          next_state=YELLOW;
        else
          next_state=GREEN;
      end
      YELLOW:begin
        if(count>=YELLOW_TIME-1)
          next_state=RED;
        else
          next_state=YELLOW;
      end
      RED: begin
        if(count>=RED_TIME-1)
          next_state=GREEN;
        else
          next_state=RED;
      end
      default:next_state=GREEN;
    endcase
  end
  always @(*) begin
    red=0;
    yellow=0;
    green=0;
    case(current_state)
      GREEN: green=1;
      YELLOW:yellow=1;
      RED:red=1;
      default:red=1;
    endcase
  end
endmodule

  
      
